(this.webpackJsonpplantastic=this.webpackJsonpplantastic||[]).push([[0],{96:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(1),a=n.n(r),i=n(43),o=n(30),s=n(18),u=n(3),j=n(109),l=n(110),d=n(111),b=n(112),f=n(113),O=n(101),h=n(108),x=n(41),p=function(){var e=Object(O.b)(),t=e.colorMode,n=e.toggleColorMode;return Object(c.jsx)(h.a,{onClick:n,icon:"dark"===t?Object(c.jsx)(x.c,{}):Object(c.jsx)(x.b,{}),"aria-label":"Toggle Color Mode"})},m=function(){return Object(c.jsxs)(j.a,{background:"tomato",py:1,position:"sticky",top:"0",children:[Object(c.jsxs)(l.a,{m:2,children:[Object(c.jsxs)(d.a,{children:["Pl",Object(c.jsx)("span",{role:"img","aria-label":"Ant",children:"\ud83d\udc1c"}),"Ast!c"]}),Object(c.jsx)(b.a,{}),Object(c.jsx)(p,{})]}),Object(c.jsx)(f.a,{})]})},v=n(123),g=n(114),y=n(115),w=function(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n},k=function(e,t){var n=Math.max(e.getTime(),t.getTime())-Math.min(e.getTime(),t.getTime());return{seconds:Math.round(n/1e3),minutes:Math.round(n/1e3/60),hours:Math.round(n/1e3/60/60),days:Math.round(n/1e3/60/60/24),weeks:n/1e3/60/60/24/7}},C=function(e){var t=e.plant,n=e.selected,r=e.onItemClick,a=k(w(t.lastWatered,t.cycleDays),new Date).days;return Object(c.jsxs)(j.a,{mb:3,mr:3,p:2,w:"100px",borderWidth:2,borderRadius:"lg",borderColor:n?"lightblue":"",onClick:function(){r(t)},cursor:"pointer",userSelect:"none",children:[Object(c.jsx)(v.a,{width:"full",src:t.image,alt:t.name}),Object(c.jsxs)(g.a,{templateColumns:"30% 70%",children:[Object(c.jsx)(g.b,{textAlign:"center",gridColumn:"1/3",children:t.name}),Object(c.jsx)(y.a,{as:x.a,height:"full"}),Object(c.jsxs)(g.b,{children:[a," days"]})]})]})},S=function(e){var t=e.plants,n=e.selection,r=e.onItemClick;return Object(c.jsx)(g.a,{m:4,justifyContent:"center",templateColumns:"repeat(auto-fill,120px)",children:t.map((function(e,t){return Object(c.jsx)(C,{plant:e,selected:n.indexOf(e)>=0,onItemClick:r},t)}))})},D=n(50),M=n(74),I=n(65),E=function(e){var t=e.children,n=Object(M.a)(e,["children"]);return Object(c.jsx)(j.a,Object(D.a)(Object(D.a)({backgroundColor:"tomato",w:"full",position:"fixed",bottom:"0"},n),{},{children:Object(c.jsxs)(l.a,{py:1,children:[Object(c.jsx)(b.a,{}),Object(c.jsx)(I.a,{children:t||Object(c.jsx)(c.Fragment,{})}),Object(c.jsx)(b.a,{})]})}))},P=n(117),W=n(72),R=n(120),A=n(35),T=n(118),U=n(116),q=n(119),B=n(122),F=n(21),J=n.n(F),L=n(34),N="plants",z=[],G=function(){return new Promise((function(e,t){var n=indexedDB.open("plantastic",2);n.onupgradeneeded=function(e){n.result.createObjectStore(N,{keyPath:"created"})},n.onsuccess=function(){e(n.result)},n.onerror=function(e){t("Unknown error occured ".concat(e))},n.onblocked=function(){t("User blocked input")}}))},H=function(){return new Promise((function(e){G().then((function(t){var n=t.transaction(N,"readonly").objectStore(N).getAll();n.onsuccess=function(t){e(t.target.result)},n.onerror=function(){console.error("Error reading indexed db"),e([])}}))}))},K=function(){H().then((function(e){var t,n=Object(o.a)(z);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e),z.splice(0,1)}}catch(c){n.e(c)}finally{n.f()}}))},Q=function(){var e=Object(L.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G().then((function(e){var n=e.transaction(N,"readwrite").objectStore(N).add(t);n.onerror=function(){console.error("Error writing item ".concat(t)),K()},n.onsuccess=function(){K()}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(L.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G().then((function(e){e.transaction(N,"readwrite").objectStore(N).delete(t.created),K()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(L.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G().then((function(e){e.transaction(N,"readwrite").objectStore(N).put(t),K()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=n(68),Z=function(e){var t=e.onSnap,n=e.width,a=e.height,i=function(e){var t=Object(r.useState)(),n=Object(u.a)(t,2),c=n[0],a=n[1];return Object(r.useEffect)((function(){if(c)return function(){c.getTracks().forEach((function(e){return e.stop()}))};!function(){var t=Object(L.a)(J.a.mark((function t(){var n;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia(e);case 3:n=t.sent,a(n),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0),console.error(t.t0),a(void 0);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}),[c,e]),c}({video:{facingMode:"environment",width:n,height:a},audio:!1}),o=Object(r.useRef)(null);i&&o.current&&!o.current.srcObject&&(o.current.srcObject=i);return Object(c.jsxs)(j.a,{p:2,border:"1px",children:[Object(c.jsx)(U.a,{children:Object(c.jsx)("video",{ref:o,autoPlay:!0,playsInline:!0,muted:!0,onCanPlay:function(){var e;null===(e=o.current)||void 0===e||e.play()}})}),Object(c.jsx)(U.a,{my:2,children:Object(c.jsx)(W.a,{rightIcon:Object(c.jsx)(Y.a,{}),onClick:function(){!function(){if(i){var e=document.createElement("canvas");e.width=n,e.height=a;var c=e.getContext("2d");o.current&&c&&c.drawImage(o.current,0,0);var r=e.toDataURL();e.remove(),t&&t(r)}}()},children:"Snap!"})})]})},$=function(){var e=Object(P.a)(),t=e.isOpen,n=e.onOpen,r=e.onClose,i=a.a.useState(""),o=Object(u.a)(i,2),s=o[0],l=o[1],d=a.a.useState(0),b=Object(u.a)(d,2),f=b[0],O=b[1],h=a.a.useState(""),x=Object(u.a)(h,2),p=x[0],m=x[1],g=a.a.useState(0),y=Object(u.a)(g,2),w=y[0],k=y[1],C=function(){l(""),O(0),m(""),k(0),r()};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(W.a,{onClick:n,children:"Add Plant"}),Object(c.jsxs)(R.a,{isOpen:t,onClose:C,children:[Object(c.jsx)(R.f,{}),Object(c.jsxs)(R.d,{h:"lg",p:2,w:"sm",children:[Object(c.jsx)(R.e,{children:"Add Plant"}),Object(c.jsx)(R.c,{}),Object(c.jsx)(R.b,{position:"relative",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={created:new Date,lastWatered:new Date,name:s,image:p,cycleDays:f};Q(t),C()},children:[Object(c.jsx)(j.a,{hidden:0!==w,children:Object(c.jsxs)(A.a,{isRequired:!0,children:[Object(c.jsx)(T.a,{children:"Beatiful Image"}),Object(c.jsx)(Z,{width:200,height:200,onSnap:function(e){m(e),w<1&&k(w+1)}})]})}),Object(c.jsxs)(j.a,{hidden:1!==w,children:[Object(c.jsx)(U.a,{children:Object(c.jsx)(v.a,{src:p})}),Object(c.jsxs)(A.a,{isRequired:!0,children:[Object(c.jsx)(T.a,{children:"Name"}),Object(c.jsx)(q.a,{onChange:function(e){var t=e.target;l(t.value)}})]}),Object(c.jsxs)(A.a,{isRequired:!0,children:[Object(c.jsx)(T.a,{children:"Water every days?"}),Object(c.jsxs)(B.c,{onChange:function(e,t){O(t)},children:[Object(c.jsx)(B.d,{}),Object(c.jsxs)(B.e,{children:[Object(c.jsx)(B.b,{}),Object(c.jsx)(B.a,{})]})]})]}),Object(c.jsx)(W.a,{my:2,type:"submit",children:"Submit"})]})]})})]})]})]})},_=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){H().then((function(e){c(e)}))}),[]),Object(r.useEffect)((function(){var e;e=function(e){c(e)},z.push(e)})),n},ee=function(){var e=_(),t=r.useState([]),n=Object(u.a)(t,2),a=n[0],i=n[1];return e.sort((function(e,t){return k(w(e.lastWatered,e.cycleDays),new Date).days-k(w(t.lastWatered,t.cycleDays),new Date).days})),Object(c.jsxs)(j.a,{h:"100vh",children:[Object(c.jsx)(m,{}),Object(c.jsx)(S,{plants:e,selection:a,onItemClick:function(e){var t=a.indexOf(e);i(-1===t?[].concat(Object(s.a)(a),[e]):a.filter((function(t){return t.created!==e.created})))}}),Object(c.jsxs)(E,{children:[Object(c.jsx)(W.a,{disabled:0===a.length,onClick:function(){!function(){var e,t=Object(o.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.lastWatered=new Date,X(n)}}catch(c){t.e(c)}finally{t.f()}i([])}()},children:"Watered!"}),Object(c.jsx)(W.a,{disabled:0===a.length,onClick:function(){!function(){var e,t=Object(o.a)(a);try{for(t.s();!(e=t.n()).done;){var n=e.value;V(n)}}catch(c){t.e(c)}finally{t.f()}}()},children:"Remove"}),Object(c.jsx)($,{})]})]})},te=n(121);Object(i.render)(Object(c.jsx)(te.a,{children:Object(c.jsx)(ee,{})}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.4d90ccce.chunk.js.map